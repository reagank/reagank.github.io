<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>My Dumb Robot</title>
  <meta name="author" content="Reagan Kelly">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="generator" content="Hexo 2.6.0"/>

  
  <meta property="og:site_name" content="My Dumb Robot"/>

  
    <meta property="og:image" content=""/>
  

  <link href="/favicon.png" rel="shortcut icon">

  
    <link rel="stylesheet" href="/css/highlightjs/atelier-estuary-light.css">
  
  <script src="/js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <link rel="alternate" href="/atom.xml" title="My Dumb Robot" type="application/atom+xml">

  <link href="/css/site.css" rel="stylesheet">
  <script type="text/javascript" src="/js/jquery.min.js"></script>
  <script type="text/javascript" src="/js/jquery.caption.min.js"></script>
  <link href="/css/captionjs.min.css" rel="stylesheet"/>
  <script type="text/javascript" src="/js/ewal.js"></script>

  
  




</head>

<body>


<div class="navbar navbar-default navbar-static-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/"><span class="text-primary">My Dumb Robot</span></a>
    </div>
    <div class="collapse navbar-collapse navbar-right">
      <ul class="nav navbar-nav">
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/archive">Archive</a></li>
        
      </ul>
      <ul class="nav navbar-nav pull-right">
      
        <li><a href="https://twitter.com/reagank">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/jmervinereagank">github</a></li>
      
      </ul>
    </div>
  </div>
</div>


<div class="container">
	<div class="row">
		<div class="col-md-8">
			<div class="container-fluid">
				<div class="row">
					<div class="col-sm-11 col-md-11">
						
						<article class="post">
  
    
  
    <h1 class="title"><a href="/2018/05/12/Remounting-the-casters/">Remounting the Casters</a></h1>
  

    <div class="post-date">
      <time datetime="2018-05-12T17:25:16.000Z">2018-05-12</time>
    </div>
  
  <div class="post-content">
    
      <p>As soon as the robot moved the first time it tipped over. The way the motors are attached to the frame, and the very low weight of the platform meant that I needed a mechanism to keep the robot shiny side up. I took a very simple approach, and made two legs and attached casters to the bottom. The prototype was mounted using an L-bracket, but it wasn’t sturdy enough. I’ve now bolted them to the front and back rails directly. </p>
<img src="/2018/05/12/Remounting-the-casters/caster-mounting.jpg" width="600" height="450">
<p>Now the robot can drive and no longer tips over. The start and stop of the motors still causes a pronounced pitch that I need to address, but it drives well. The software right now is incredibly bare-bones, but the steering works better than I expected. Next, I need to leverage the Kinect to move around. I’ll talk more about how I use the Kinect and what I want to do with it next. </p>

    
  </div>
  
      <div class="row">
    
    
    </div>
  
  <div class="addthis_toolbox addthis_default_style 
addthis_32x32_style" data-addthis-url="http://reagank.github.io/2018/05/12/Remounting-the-casters/" data-addthis-title="Remounting the Casters">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
  
  

</article>

						
						<article class="post">
  
    
  
    <h1 class="title"><a href="/2018/05/10/New-motor-brackets/">New Motor Brackets</a></h1>
  

    <div class="post-date">
      <time datetime="2018-05-11T02:06:01.000Z">2018-05-10</time>
    </div>
  
  <div class="post-content">
    
      <p>Last time I described the motors wrenching themselves free. That meant I needed a better way to secure the motors to the rails. I found my answer in a piece of plastic I picked up at an estate sale a few weeks ago. I cut a rectanguar piece for each side, and carved out a (very) rough arch.</p>
<img src="/2018/05/10/New-motor-brackets/motor-mounts.jpg" width="600" height="450">
<p>I drilled two holes on either side of the motor, found some long bolts, and bolted it to the rail. I tightened the bolts down slowly to keep the bracket parallel to the rail, sandwiching the motor between it and the rail. An important consideration is the positioning of the motors. I’ve mounted them in the middle, because it was clear that mounting them in the back wasgoing to cause the robot to tip backward. I also added casters in the front and the rear to help prevent tipping over, and I’ll talk about that next.</p>

    
  </div>
  
      <div class="row">
    
    
    </div>
  
  <div class="addthis_toolbox addthis_default_style 
addthis_32x32_style" data-addthis-url="http://reagank.github.io/2018/05/10/New-motor-brackets/" data-addthis-title="New Motor Brackets">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
  
  

</article>

						
						<article class="post">
  
    
  
    <h1 class="title"><a href="/2018/05/09/Attaching-the-motors/">Attaching the Motors</a></h1>
  

    <div class="post-date">
      <time datetime="2018-05-10T02:38:02.000Z">2018-05-09</time>
    </div>
  
  <div class="post-content">
    
      <p>Understanding how the motors will be attached has been one of the open questions of the project for me. I’ve been planning to mount the motors to the slotted frame, but exactly how to do that wasn’t clear. The best position was pretty much straight up-and-down, as tightly to the rail as possible, but I still wasn’t sure hw to achieve that - the shape of the motor/gearbox assembly is pretty irregular, and there aren’t any mounting holes. </p>
<p>My original solution was to use flexible metal strapping. I bolted one end of the strap to the frame, bent the strap around the gearbox, above the motor, and then bolted it to the rail again.<br><img src="/2018/05/09/Attaching-the-motors/motor-mounting.jpg" width="600" height="450" title="The right motor attached to the frame"></p>
<p>Once the motors were mounted, attaching the wheels is straight-forward. I cut 7/16” threaded rod to length, and just put washers and nuts on the end to hold the wheel in place.<br><img src="/2018/05/09/Attaching-the-motors/wheel-mounting.jpg" width="600" height="900" title="The right wheel attached to the motor"></p>
<p>Mounting it this way allowed the motor to wobble quite a bit. I had hoped that when the wheels were on and carrying weight, that wouldn’t matter. Unfortunately, it allowed too much movement, and as soon as I turned the motors on, they basicaly wrenched themselves free of the straps. That meant I didn’t have much choice but to make a more secure bracket. For that I used a scrap piece of plastic. I’ll talk more about next.</p>

    
  </div>
  
      <div class="row">
    
    
    </div>
  
  <div class="addthis_toolbox addthis_default_style 
addthis_32x32_style" data-addthis-url="http://reagank.github.io/2018/05/09/Attaching-the-motors/" data-addthis-title="Attaching the Motors">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
  
  

</article>

						
						<article class="post">
  
    
  
    <h1 class="title"><a href="/2018/05/03/Software/">Software</a></h1>
  

    <div class="post-date">
      <time datetime="2018-05-03T23:55:32.000Z">2018-05-03</time>
    </div>
  
  <div class="post-content">
    
      <p>I know I can’t write all of the software for the robot, but I want to do what I can. I want to make sure I understand how the system works, from how the motors are controlled to processing the depth and video from the Kinect. THe first stage is going to be controlling the motors. I have a bluetooth controller that I’ve paired with the Pi, and a little time mapping the joysticks gave me the input numbers to watch. </p>
<p>The joysticks have two dimensions - horizonntal and vertical. The value is zero when the joystick is in the middle, and the extremes range from ~1280 to ~-1280 (there’s some wiggle room in the value). I have two motors, so I’m going to have the left joystick control the left motor and the right control the right. The motor controller uses PWM to control the motor speed, with one pin to control one direction and one pin to control the other. </p>
<p>I’ll work out the percentage of the joystick position, and then use that value for the PWM. If the value is positive then the motor will spin forward, if its negative it’ll spin backward. It should be enough to have forward, stop, and reverse funcions in a motor class, instantiate the class for the left and right motors, and then drive it with the controller. To go forward, push forward on both sticks, to turn left push forward on the right stick, etc.</p>
<p>I’m gaining on the construction, with only the casters left to mount. After that it just needs to be wired and it’ll be done. Next time I’ll talk about how the motors and wheels are mounted.</p>

    
  </div>
  
      <div class="row">
    
    
    </div>
  
  <div class="addthis_toolbox addthis_default_style 
addthis_32x32_style" data-addthis-url="http://reagank.github.io/2018/05/03/Software/" data-addthis-title="Software">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
  
  

</article>

						
						<article class="post">
  
    
  
    <h1 class="title"><a href="/2018/05/02/Electronics/">Electronics</a></h1>
  

    <div class="post-date">
      <time datetime="2018-05-03T01:57:50.000Z">2018-05-02</time>
    </div>
  
  <div class="post-content">
    
      <p>I want the robot to run on 12V so that I can drive the motor and all of the electronics with a single lead-acid battery. The Kinect already wants 12V, but the Raspberry Pi needs 5V. Here’s what I’ve come up with: Power comes from a UB1270 12VDC 7Ah sealed lead acid battery, which is split into 4 separate circuits - one each for the left and right motors, one for the Raspberry Pi, and one for the Kinect.</p>
<p>The Raspberry Pi’s circuit goes to a 12V-5V step-down converter, which connects to the Pi. The Pi is also connected to the motor controllers via GPIO pins and the Kinect via USB. To protect the Pi I have a 2A fuse in the circuit just in case. The Kinect circuit connects to a 12V boost converter and then to the power cables of the Kinect adapter. I also have a 2A fuse in this circuit.<br><img src="/2018/05/02/Electronics/power-converters.jpg" width="600" height="900" title="The 12V Boost-up converter and 12V-5V Step-down converter"></p>
<p>The last two circuits are identical, one each for the left and right motors. These connect to motor controllers, which are connected to the motors. Both circuits have a 35A fuse. The motors can draw substantially more, but the motor controllers can’t handle any more than that. Because the power wheels motors sddraw a lot of current, so typical hobby motor controllers like the L298N won’t work<a href="https://custom-build-robots.com/raspberry-pi-robot-cars/big-rob-motor-driver-bts7960b/8155?lang=en" target="_blank" rel="noopener">[1]</a>. I’m using two BTS7960 DC motor controllers, which I’m going to control with the Pi using the gpiozero Python library. That brings me to the software - I’m going to write some simple code to allow me to drive the robot using a bluetooth controller, and then more complex programs to allow it to drive autonomously. I’ll talk more about that next time.<br><img src="/2018/05/02/Electronics/motor-controller.jpg" width="600" height="900" title="The BTS7960 43A DC motor controller"></p>

    
  </div>
  
      <div class="row">
    
    
    </div>
  
  <div class="addthis_toolbox addthis_default_style 
addthis_32x32_style" data-addthis-url="http://reagank.github.io/2018/05/02/Electronics/" data-addthis-title="Electronics">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
  
  

</article>

						
						<article class="post">
  
    
  
    <h1 class="title"><a href="/2018/05/01/Kinect-Power-Adapter-Issues/">Kinect Power Adapter Issues</a></h1>
  

    <div class="post-date">
      <time datetime="2018-05-02T00:11:34.000Z">2018-05-01</time>
    </div>
  
  <div class="post-content">
    
      <p>Before I get into the electronics, I want to talk about some strange behavior from the Kinect. I’m using it as the eyes (and ears?) of the project. The depth sensing is awesome, but you can’t just plug it in to a computer - it’s not a standard USB plug. Adapters are easy to find, just a wall-wart to convert from 120VAC to 12VDC connected to an adapter for the Kinect plug. A short USB cord is connected to the adapter that carries the data to the Pi. Device drivers are now built-in to the Linux kernel, but you need instal additional software, like libfreenect, to take full advantage of the Kinect. There are a number of tutorials and StackOverflow questions that talk about connecting the Kinect to a Raspberry Pi or other Linux machine. In addition, the <a href="https://openkinect.org/wiki/Main_Page" target="_blank" rel="noopener">OpenKinect project</a> has very good documentation.</p>
<p>The instructions are pretty painless to follow, and the installation ran without any errors. The Kinect is supposed to appear as three different USB devices, a camera, an audio device, and a motor, with the motor powered by 5V USB power, and the camera and audio powered by 12V from the adapter. Once libfreenect was installed, I plugged the adapter into the Kinect, plugged in the USB and ran a demo, only to be told the Kinect camera wasn’t connected. <code>lsusb</code> showed only the motor was connected. I tried using it a second time with an iMac, but still couldn’t get it to work. I tested the Kinect on the Xbox and found it worked fine, so it looked like the problem was in the adapter. I was able to find a <a href="https://www.element14.com/community/thread/12665/l/xbox-kinect-pinout-for-those-looking-for-it?displayFullThread=true" target="_blank" rel="noopener">pinout for the Kinect plug</a> Plugging it in and checking the pins that should carry 12V showed ~5V instead. </p>
<p>I’d always intended to cut the plug off of this to attach it to a 12V battery, so I cut the cord, which also let me test the output of the wall wart. The multimeter showed ~5V DC, which isn’t enough to power the camera and microphone. Connecting the Kinect directly to the battery resolved the issues, and I saw the motor, the camera, and the audio device and could run the demos. I doubt many other people would have this problem, but if the camera and audio device don’t appear when you attach your Kinect, check to make sure the power adapter is actually producing what it’s supposed to.</p>

    
  </div>
  
      <div class="row">
    
    
    </div>
  
  <div class="addthis_toolbox addthis_default_style 
addthis_32x32_style" data-addthis-url="http://reagank.github.io/2018/05/01/Kinect-Power-Adapter-Issues/" data-addthis-title="Kinect Power Adapter Issues">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
  
  

</article>

						
						<article class="post">
  
    
  
    <h1 class="title"><a href="/2018/04/29/Body-and-Chassis/">Body and Chassis</a></h1>
  

    <div class="post-date">
      <time datetime="2018-04-30T03:40:16.000Z">2018-04-29</time>
    </div>
  
  <div class="post-content">
    
      <p>Where I can, I want to use things I already have. That starts with the body of the robot - the main platform is made from a thick plastic 14” x 17” cutting board, with 1 1/4” x 2 1/4” slotted angle iron bolted to the bottom to act as a frame. I used a pair of 2 1/2” corner braces to connect perpendicular sides of the angle iron, and I fastened the cutting board to the top of the angle iron with 3/8” bolts.</p>
<img src="/2018/04/29/Body-and-Chassis/robot-chassis.jpg" width="600" height="450" title="The platform (i.e., cutting board) attached to the slotted angle iron frame">
<p>My plan is to attach the motor-gearbox assembly to the frame, although I haven’t worked out precisely how to do that yet. I’ll attach the casters in the front. but I want to place the motors and rear wheels first to see how tall it is. The platform carries the shiny bits of the robot, with the Kinect mounted at the front, a box with the electronic components mounted just behind it, and a battery centered at the back of the platform. The battery is secured to the platform using brackets and a bungee cord, and the Kinect and box are mounted to the platform with high-strength hook and loop fasteners.</p>
<p>Next up I’ll talk abut the electronics - what I’m using and how everything is connected.</p>

    
  </div>
  
      <div class="row">
    
    
    </div>
  
  <div class="addthis_toolbox addthis_default_style 
addthis_32x32_style" data-addthis-url="http://reagank.github.io/2018/04/29/Body-and-Chassis/" data-addthis-title="Body and Chassis">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
  
  

</article>

						
						<article class="post">
  
    
  
    <h1 class="title"><a href="/2018/04/28/Introducing/">Introducing</a></h1>
  

    <div class="post-date">
      <time datetime="2018-04-29T02:34:42.000Z">2018-04-28</time>
    </div>
  
  <div class="post-content">
    
      <p>I’ve been building a robot for the last few weeks. It’s probably better to say that I’ve been planning for a few weeks and started building it this week. It’s not very complicated, and no one will mistake it for a professional piece of work, but it is starting to come together. I want to document some of the process here, and describe what I’m doing and why. This isn’t meant for a particular audience, and it may only be interesting to me, but I have stumbled across a few things while I’ve been starting, and it might be nice for that information to live in one place.</p>
<h3 id="What-do-you-mean-by-a-robot"><a href="#What-do-you-mean-by-a-robot" class="headerlink" title="What do you mean by a robot?"></a>What do you mean by a robot?</h3><p>I’m making a rover-style wheeled ground vehicle. I want it to be able to move autonomously (as much as possible), and I want to be able to drive it remotely. I’m using a Kinect to provide vision and depth sensing, power wheels motors to provide propulsion, and a Raspberry Pi 3 to control everything. I’ve built a chassis out of a piece of plastic and slotted angle iron, and I’m going to use casters as front wheels. I’ve been lax about taking pictures of my progress, but I’ll try to record my progress photographically from here forward.</p>
<h3 id="What-can-we-expect"><a href="#What-can-we-expect" class="headerlink" title="What can we expect?"></a>What can we expect?</h3><p>Sporadic posting, likely. I’ve never been good about keeping to a schedule, and don’t have a set time frame to finish this project. I’m interested in all sides of this - building and assembling the robot, wiring everything, and writing the software to operate it. I’ll try to cover all of those things here.</p>

    
  </div>
  
      <div class="row">
    
    
    </div>
  
  <div class="addthis_toolbox addthis_default_style 
addthis_32x32_style" data-addthis-url="http://reagank.github.io/2018/04/28/Introducing/" data-addthis-title="Introducing">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
  
  

</article>

						
						

					</div>
				</div>
			</div>
		</div>
		<div class="col-md-offset-1 col-md-3"><div class="sidebar-nav">

    <div class="widget">
  	<h3>What is this all about?</h3>
<ul class="list-group">

  <li class="list-group-item">
    <a href="/2018/04/28/Introducing">What am I doing?</a>
  </li>

</ul>

    </div>

    <div class="widget">
  	
<h3>Tags</h3>
<ul class="list-group">

  
  <li class="list-group-item">
    <span class="badge">1</span>
    <a href="/tags/Raspberry-Pi/">Raspberry Pi</a>
  </li>
  

  
  <li class="list-group-item">
    <span class="badge">3</span>
    <a href="/tags/construction/">construction</a>
  </li>
  

  
  <li class="list-group-item">
    <span class="badge">1</span>
    <a href="/tags/development/">development</a>
  </li>
  

  
  <li class="list-group-item">
    <span class="badge">2</span>
    <a href="/tags/electronics/">electronics</a>
  </li>
  

  
  <li class="list-group-item">
    <span class="badge">1</span>
    <a href="/tags/hacks/">hacks</a>
  </li>
  

  
  <li class="list-group-item">
    <span class="badge">1</span>
    <a href="/tags/introduction/">introduction</a>
  </li>
  

  
  <li class="list-group-item">
    <span class="badge">3</span>
    <a href="/tags/overview/">overview</a>
  </li>
  

  
  <li class="list-group-item">
    <span class="badge">2</span>
    <a href="/tags/planning/">planning</a>
  </li>
  

  
  <li class="list-group-item">
    <span class="badge">1</span>
    <a href="/tags/problems/">problems</a>
  </li>
  

  
  <li class="list-group-item">
    <span class="badge">1</span>
    <a href="/tags/robot/">robot</a>
  </li>
  

</ul>


    </div>

    <div class="widget">
  	<h3>Resources</h3>
<ul class="list-group">

  <li class="list-group-item">
    <a href="https://github.com/OpenKinect/libfreenect">libfreenect from OpenKinect</a>
  </li>

  <li class="list-group-item">
    <a href="https://gpiozero.readthedocs.io/">Raspberry Pi&#39;s gpioze python library</a>
  </li>

  <li class="list-group-item">
    <a href="https://naman5.wordpress.com/2014/06/24/experimenting-with-kinect-using-opencv-python-and-open-kinect-libfreenect/">Uing a Kinect with libfreenect and OpenCV</a>
  </li>

</ul>
    </div>

</div>
</div>
	</div>
</div>
<div id="push"></div>
<div class="navbar navbar-footer">
  <div class="container">
    <p class="navbar-center navbar-text">
      
      &copy; 2018 Reagan Kelly
      
    </p>
  </div>
</div>
<script src="/js/bootstrap.min.js"></script>






</body>
</html>